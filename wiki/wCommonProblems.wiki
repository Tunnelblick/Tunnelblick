#summary Common Problems
#sidebar wSb
<wiki:toc max_depth="2" />
==It's complicated!==
OpenVPN is such a powerful tool with so many options, and computer configurations are so varied, that it is impossible to have an exhaustive troubleshooting guide. This guide is meant for the most common setups, so if it doesn't apply to your situation, or doesn't help, ask the [http://groups.google.com/group/tunnelblick-discuss Tunnelblick Discussion Group] or the [http://news.gmane.org/gmane.network.openvpn.user OpenVPN users mailing list] for help. 

==How can you tell if OpenVPN connected to the server properly?==
  # Click on the Tunnelblick icon at the top of the display.
  # See what appears in the drop-down list for the configuration you are trying to troubleshoot:
    * If the entry shows *Connect xyz*, configuration xyz is *not connected* and Tunnelblick is not trying to connect
    * If the entry shows *√ Disconnect xyz*, configuration xyz *is connected*
    * If the entry shows *- Connect xyz*, Tunnelblick is *trying to connect* configuration xyz

==If OpenVPN is not connected to the server==
If OpenVPN can't connect to the server, there should be one or more error messages in the OpenVPN log to indicate what the problem is. To see the OpenVPN log, click on the Tunnelblick icon, click on "Details…", then click on the tab corresponding to the configuration you are troubleshooting. The OpenVPN log is the large area of white text on a black background. (It contains messages from Tunnelblick in addition to the messages from OpenVPN.)

Look at lines near the end of the log for an error message.


==OpenVPN Connects, but you can't surf the Internet==
See [wConnectedBut Connects OK, But...].


==An error messages says to see details in the Console Log==
See [wConsoleLog The Console Log] for instructions on viewing the Console Log.


==An error message says "Tunnelblick could not be launched because of a problem with the configuration. Please examine the Console Log for details."==
This is usually caused by a problem with the private configuration folder. (Tunnelblick sets this up, but if you accidentally delete a critical file or folder, this could happen.) The Console log will contain details about the specific problem. See [wFileLocations File Locations] for information about how the files and folders should be set up.

(See [wConsoleLog The Console Log] for instructions on viewing the Console Log.)


==An OpenVPN log entry says "potential route subnet conflict"==
This means that the remote network you are creating a VPN to has IP addresses that are also in your local LAN.

The easiest way to fix this is usually to change the addresses of your local LAN. You do this by changing your router's configuration. For some routers you specify the first three numbers of the LAN (e.g. 192.168.77); in other routers you specify the address of the router itself (e.g. 192.168.77.1).

After changing the LAN address, you should restart all computers (and other network devices including network printers), so they start using addresses in the new address range.

Example:
 WARNING: potential route subnet conflict between local LAN [192.168.1.0/255.255.255.0] and remote VPN [192.168.1.0/255.255.255.0] 

This means that both the remote network and your local network are using the 192.168.1.`*` range of IP addresses. So change your local network to use, for example, 192.168.5.`*`, or 192.168.23.`*`. If you get the same warning message, try another address range.


==An OpenVPN log entry says "Message hash algorithm 'SHA512' not found (OpenSSL)"==
This means that the configuration and the server are trying to use a message hash algorithm that Tunnelblick doesn't know about. To run on OS X 10.4-10.6 with the same binary, Tunnelblick assumes that only the hash and encryption algorithms available on OS X 10.4 are available, regardless of which version of OS X you are running. A workaround (which involves creating a customized build of Tunnelblick from the source code) is described in  http://code.google.com/p/tunnelblick/issues/detail?id=82.


==An OpenVPN log entry says "Cannot allocate TUN/TAP dev dynamically"==
This problem indicates a problem with the tun/tap kexts.
  * It could be caused (prior to Tunnelblick version 3.0b22),  by trying to make a connection while running the Snow Leopard kernel in 64 bit mode. Update to the latest version to correct this problem.
  * It can be caused by the following sequence in the configuration file:
    dev-type tun<br>
    dev abcdefg
  and a workaround is to change to the single line
    dev tun
  (or substitute "tap" for "tun" in the above if you are using the tap interface.)
  * It can be caused by extra "tun" or "tap" kexts being loaded. See the following entry.


==An OpenVPN log entry says "Tunnelblick: openvpnstart status #247: Error: Unable to load tun and tap kexts. Status = 71"==
See the following entry.
==An OpenVPN log entry says "Tunnelblick: openvpnstart status #247: Error: Unable to load net.tunnelblick.tun and/or net.tunnelblick.tap kexts in 5 tries. Status = 71"==
This means that Tunnelblick was unable to load the tun and/or tap kexts (device drivers) it needs to make a VPN connection. Usually that is because there are incompatible kexts already loaded. Recent versions of Tunnelblick try to be "good citizens" by loading kexts only when needed, and unloading them when they are no longer needed. However, other VPN clients (Cisco AnyConnect SSL VPN, for example) load their own, incompatible kexts when the computer is started and leave them loaded, whether or not a VPN connection is in use.

To find out if this is what is causing the problem, use the "kextstat" command in a Terminal window. It will list all of the loaded kexts. Usually the tun and/or tap kexts show up at or near the end of the list. Common tun/taps are:
  * net.tunnelblick.tun and net.tunnelblick.tap: These are the kexts used by current versions of Tunnelblick. The appropriate one (tun or tap) is loaded when a connection is requested, and unloaded when it is disconnected.
  * foo.tun and foo.tap: These are obsolete Tunnelblick kexts, loaded when an older version of Tunnelblick is launched (and unloaded when the computer restarts). If Tunnelblick detects them, it will offer to unload them before connecting.
  * com.cisco.cscotun (and com.cisco.cscotap?): These are Cisco AnyConnect SSL VPN kexts. Cisco's installer causes them to be loaded when the computer starts.
  * com.viscosityvpn.Viscosity.tun and com.viscosityvpn.Viscosity.tap: These are kexts used by the Viscosity VPN client.

To unload kexts and allow Tunnelblick to load its own kexts, use the 'kextunload" Terminal command to unload each loaded tun and tap kext individually. For example, to unload com.viscosityvpn.Viscosity.tun, type the following:

  sudo kextunload -b com.viscosityvpn.Viscosity.tun

(The "sudo" is necessary because this command modifies the device driver. You will be asked for your administrator password.)


==A connection is established, but drops out or is restarted after a few minutes, or DNS stops working after a few minutes==
This can have several causes:
  * Another computer on your network is attempting to connect to the VPN using the same credentials.
  * You have a version of Tunnelblick earlier than 3.1beta04 and have both "Set nameserver" and "Monitor connection" checked. When DHCP is renewed, the changes can cause earlier versions of Tunnelblick to restart the connection. Update to the latest version of Tunnelblick.
  * You have "Monitor connection" UNchecked. When DHCP is renewed, the change is ignored (because "Monitor connection" isn't checked) and the VPN-supplied DNS server is replaced with the DHCP-supplied server. Often a DHCP-supplied server will only respond to queries which originate within that network. Since the DNS queries originate from the VPN, which is outside of that network, the queries will not be answered. Update to the latest version of Tunnelblick and put a check next to "Monitor network".


==An OpenVPN log entry says "Cannot load certificate file XXX.crt: error: 02001002:system library:fopen:No such file or directory: error: 20074002:BIO routines:FILE_CTRL:system lib: error:140AD002:SSL routines:SSL_CTX_use_certificate_file:system lib "==
Your certificate file (XXX.crt) was not found. Usually the file should be in the same folder as the configuration file, ~/Library/Tunnelblick/Configurations, not in a subfolder. For example, if the configuration file has a line such as
  cert abcde.crt
or
  ca abcde.crt
then the file abcde.crt should be in the same folder as the configuration. If the configuration file has a line such as
  cert xyz/abcde.crt
or
  ca xyz/abcde.crt
then the file abcde.crt should be in the xyz subfolder of the folder with the configuration.

==An OpenVPN log entry says "TLS Error: Auth Username/Password was not provided by peer"==
Your client configuration file should include an "auth-user-pass" option.

------------------

===PLEASE USE THE [http://groups.google.com/group/tunnelblick-discuss TUNNELBLICK DISCUSSION GROUP] FOR COMMENTS OR QUESTIONS===